<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Business Details</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="business-details.css" />
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>
    <style>
      .reviews-container h3 {
        color: blue;
      }
      .reviews-container h4 {
        color: blue;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Business Details</h1>
      <a href="business-showcase.html" class="btn">Back to Listings</a>
    </header>

    <div class="business-details-container">
      <div id="businessImages"></div>
      <h2 id="businessName"></h2>
      <p><strong>Category:</strong> <span id="businessCategory"></span></p>
      <p><strong>Address:</strong> <span id="businessAddress"></span></p>
      <p><strong>Details:</strong> <span id="businessDetails"></span></p>
      <p><strong>Price:</strong> â‚¦<span id="businessPrice"></span></p>
      <a id="businessWhatsApp" class="btn">Contact on WhatsApp</a>
      <a id="businessWebsite" class="btn" target="_blank">Visit Website</a>
    </div>

    <div class="business-images" id="businessImagesContainer"></div>

    <hr />

    <div class="reviews-container">
      <h3>Customer Reviews</h3>
      <p id="averageRating">No ratings yet.</p>
      <!-- Average rating display -->
      <div id="reviewsList"></div>

      <h4>Leave a Review</h4>
      <form id="reviewForm" class="review-form">
        <input type="text" id="reviewerName" placeholder="Your Name" required />
        <textarea
          id="reviewText"
          placeholder="Write a review..."
          required
        ></textarea>
        <button type="submit">Submit Review</button>
      </form>
    </div>

    <script src="firebase-config.js"></script>
    <script type="module">
      import {
        loadBusinessDetails,
        displayReviews,
      } from "./business-details.js";

      document.addEventListener("DOMContentLoaded", async () => {
        await loadBusinessDetails();
        await displayReviews();
      });
    </script>
  </body>
</html>
